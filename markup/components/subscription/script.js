!function(a){"use strict";a(function(){var b=a(".b-subscription form");a(".b-subscription").delegate(".b-subscription__send-again","click",function(c){var d=a(this).closest(".b-subscription");d.addClass("i-fadeout"),setTimeout(function(){d.removeClass("i-error").removeClass("i-success").removeClass("i-fadeout")},500),b.find("input").val(""),c.preventDefault()}),b.data("Form").submitForm=function(b){var c=a(b.target),d=c.data("Form"),e=c.closest(".b-subscription");d.$submitButton.hasClass("i-disabled")||!d.isValid()?b.preventDefault():-1!==d.$elem.attr("action").search("json")&&(a.ajax({url:d.$elem.attr("action"),type:d.$elem.attr("method"),dataType:"json",data:d.$elem.serialize(),success:function(a){a&&a.STATUS&&"Y"===a.STATUS?(d.$elem.closest(".b-subscription").addClass("i-fadeout"),setTimeout(function(){d.$elem.closest(".b-subscription").addClass("i-success").removeClass("i-error").removeClass("i-fadeout")},500),e.find(".b-message").html(a.MESSAGE)):a&&a.STATUS&&"E"===a.STATUS&&(d.$elem.closest(".b-subscription").addClass("i-fadeout"),setTimeout(function(){d.$elem.closest(".b-subscription").addClass("i-error").removeClass("i-success").removeClass("i-fadeout")},500),e.find(".b-message").html(a.MESSAGE))},error:function(){}}),b.preventDefault())},b.submit(b.data("Form").submitForm)})}(jQuery);